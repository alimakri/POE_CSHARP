<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <script>
        // Création d'objets en javascript
        //var employe1 = new Object();
        var employe1 = {};
        employe1.name = "John Smith";
        employe1.age = 21;
        employe1.salary = 10000;
        employe1.payRise = function (amount) {
            this.salary += amount;
            return this.salary;
        };
        var x = employe1.payRise(200);

        // en json
        var employe2 = {
            name: "Mary Jones",
            age: 42,
            salary: 20000,
            payRise: function (amount) {
                this.salary += amount;
                return this.salary;
            }
        };
        var x = employe2.payRise(200);


        // Classe-Constructeur en js
        var Account = function (id, name) {
            this.id = id;
            this.name = name;
            this.balance = 0;
            this.numTransactions = 0;
        };

        // prototype (extension de méthode)
        Account.prototype = {
            deposit: function (amount) {
                this.balance += amount;
                this.numTransactions++;
            },
            withdraw: function (amount) {
                this.balance -= amount;
                this.numTransactions++;
            },
            displayDetails: function () {
                alert(this.id + ', ' + this.name + ' balance $' + this.balance + ' (' + this.numTransactions + ' transaction(s)');
            }
        };

        var acc1 = new Account(1, "John");
        var acc2 = new Account(2, "Mary");
        acc1.deposit(100);
        acc1.displayDetails();
        acc2.withdraw(50);
        acc2.displayDetails();

        // *********************************************
        // Encapsulation de propriété
        // *********************************************
        var Person = function (name, age) {
            // private
            var _name, _age;
            _name = name;
            _age = age;

            this.getName = function () { return _name; }
            this.setName = function (value) { _name = value; }

            this.getAge = function () { return _age; }
            this.setAge = function (value) { if (value > 0 && value <= 100) _age = value; }
        }
        // un prototype (comme les méthodes d'extension en CS) n'a pas accès au private
        Person.prototype = {
            toString: function () {
                return this.getName() + ' is ' + this.getAge();
            }
        };
        var p1 = new Person('Joe', 21);
        alert(p1.toString());
        alert(p1._name); // pas d'accès au private
    </script>
</body>
</html>